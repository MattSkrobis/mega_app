%h1 Book

= image_tag @book.avatar.url(:medium)

%b Title
=@book.title
%br

%b Author
=@book.author
%br

%b Description
=@book.description
%br

%b Publisher
=@book.publisher
%br

%b Genre
=@book.genre
%br

%b Edition
=@book.edition
%br

%h2 Leave a comment
- if user_signed_in?
  =semantic_form_for([@book, @comment]) do |f|
    =f.input :description
    =f.input :rating
    =f.input :user_id, as: :select, collection: User.all
    =f.actions do
      =f.action :submit
      =f.action :cancel
- else
  %p Sign in to add comments


%h2 Comments about #{@book.title}
%table.table.table-hover
  %thead
    %tr
      %th Description
      %th Rating
      %th User
      %th Actions
  %tbody
    - @book.comments.where('id IS NOT NULL').each do |comment|
      %tr
        %td= comment.description
        %td= comment.rating
        %td= comment.user
        %td
          - if current_user && current_user == comment.user
            = link_to "Edit", edit_book_comment_path(@book, comment), class: 'btn'
            = link_to 'Destroy', book_comment_path(@book, comment), method: :delete, data: {confirm: 'Are you sure?'}, class: 'btn btn-danger'
          - else

